From a497fdf302bf67e4df2e1474389c0ff2152f1e99 Mon Sep 17 00:00:00 2001
From: Philip Withnall <pwithnall@endlessos.org>
Date: Fri, 24 Sep 2021 08:58:42 +0100
Subject: [PATCH] gdbusconnection: Add some ownership annotations

Signed-off-by: Philip Withnall <pwithnall@endlessos.org>

Conflict:NA
Reference:https://gitlab.gnome.org/GNOME/glib/-/commit/a497fdf302bf67e4df2e1474389c0ff2152f1e99

---
 gio/gdbusconnection.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

diff --git a/gio/gdbusconnection.c b/gio/gdbusconnection.c
index 24a50fcf20..40ce1b6fc7 100644
--- a/gio/gdbusconnection.c
+++ b/gio/gdbusconnection.c
@@ -4086,11 +4086,11 @@ typedef struct
   ExportedObject *eo;
 
   guint                       id;
-  gchar                      *interface_name;
-  GDBusInterfaceVTable       *vtable;
-  GDBusInterfaceInfo         *interface_info;
+  gchar                      *interface_name;  /* (owned) */
+  GDBusInterfaceVTable       *vtable;  /* (owned) */
+  GDBusInterfaceInfo         *interface_info;  /* (owned) */
 
-  GMainContext               *context;
+  GMainContext               *context;  /* (owned) */
   gpointer                    user_data;
   GDestroyNotify              user_data_free_func;
 } ExportedInterface;
@@ -4116,12 +4116,12 @@ exported_interface_free (ExportedInterface *ei)
 struct ExportedSubtree
 {
   guint                     id;
-  gchar                    *object_path;
-  GDBusConnection          *connection;
-  GDBusSubtreeVTable       *vtable;
+  gchar                    *object_path;  /* (owned) */
+  GDBusConnection          *connection;  /* (unowned) */
+  GDBusSubtreeVTable       *vtable;  /* (owned) */
   GDBusSubtreeFlags         flags;
 
-  GMainContext             *context;
+  GMainContext             *context;  /* (owned) */
   gpointer                  user_data;
   GDestroyNotify            user_data_free_func;
 };
-- 
GitLab

